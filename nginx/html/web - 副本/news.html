<html>
	<meta charset="UTF-8">
	<head>
		<link rel="stylesheet" href="currency.css">
		<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
		<script>
			$.ajax({
				url: 'http://localhost:8081/Category/getAllCategories',
				type: 'GET',
				dataType: 'json',
				success: function(newsData) {
					// 将新闻数据显示在页面上
					var id = 1;
					const newsContainer = $('#Category-container');
					newsData.forEach(news => {
						const newsItem = $('<div>');
						newsItem.html(`
							<div onclick="getNewsByCategoryId(${id++})">
							<li>${news.name}</li>
							</div>
						`);
						newsContainer.append(newsItem);
					});
				},
				error: function(error) {
					console.error('Error fetching news:', error);
				}
			});
			$.ajax({
				url: 'http://localhost:8081/news/getAllNews',
				type: 'GET',
				dataType: 'json',
				success: function(newsData) {
					// 将新闻数据显示在页面上
					const newsContainer = $('#News-container');
					newsData.forEach(news => {
						const newsItem = $('<div>');
						newsItem.html(`
					<div onclick="toDetailedInfo(${news.newsId})">
					<h2>${news.title}</h2>
					<img src="${news.imageUrl}">
					<p>${news.content}</p>
					<br>
					<hr>
					</div>
					`);
						newsContainer.append(newsItem);
					});
				},
				error: function(error) {
					console.error('Error fetching news:', error);
				}
			});

			function getNewsByCategoryId(id) {
				$.ajax({
					url: 'http://localhost:8081/news/getNewsByCategoryId/' + id,
					type: 'GET',
					dataType: 'json',
					success: function(newsData) {
						// 将新闻数据显示在页面上
						const newsContainer = $('#News-container');
						newsContainer.empty();
						newsData.forEach(news => {
							const newsItem = $('<div>');
							newsItem.html(`
							<div>
							<h2>${news.title}</h2>
							<img src="${news.imageUrl}">
							<p>${news.content}</p>
							<br>
							<hr>
							</div>
							`);
							newsContainer.append(newsItem);
						});
					},
					error: function(error) {
						console.error('Error fetching news:', error);
					}
				});
			}

			function toDetailedInfo(newsId) {
				location.href = "/web/new_info.html?newsId=" + newsId;
			}
		</script>
		<style>
			li {
				background-color: aqua;
				width: 100px;
				text-align: center;
				border-style: solid;
			}
		</style>
	<body>
		<ul>
			<li onclick="location.reload()">首页</li>
			<div id="Category-container"></div>
		</ul>
		<div id="News-container"></div>
	</body>
</html>