<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="currency.css">
		<meta charset="utf-8">
		<title></title>

		<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
		<script>
			var urlParams = new URLSearchParams(window.location.search);
			var id = urlParams.get('id');
			$.ajax({
				url: 'http://localhost:8081/user/getUserById/' + id,
				type: 'GET',
				dataType: 'json',
				success: function(newsData) {
					// 将新闻数据显示在页面上
					const newsContainer = $('#user-container');
					const newsItem = $('<tr>');
					newsItem.html(`	
							<td>Old</td>
							<td>${newsData.username}</td>
							<td>${newsData.password}</td>
						`);
					newsContainer.append(newsItem);
				},
				error: function(error) {
					console.error('Error fetching news:', error);
				}
			});

			function user_update() {
				var username = $("#username").val(); // 获取用户名
				var password = $("#password").val(); // 获取用户名
				$.ajax({
					url: 'http://localhost:8081/user/updateUserById/' + id,
					type: 'GET',
					data: {
						username:username,
						password:password
					},
					success: function(data) {
						if (data === "true"){
							alert("更新成功");
							history.back();
						}
					}
				});
			}
		</script>

		<script>
		</script>
	</head>
	<body>
		<table border="1" style="text-align: center;">
			<tr>
				<td>类型</td>
				<td>用户名</td>
				<td>密码</td>
			</tr>
			<tbody id=user-container></tbody>
			<tr>
				<form id="updateform">
					<td>New</td>
					<td> <input type="text" name="username" id="username"></td>
					<td><input type="password" name="password" id="password"></td>
				</form>
			</tr>
		</table>
		<button onclick="user_update()">提交</button>
		<button onclick="window.history.back()">返回</button>
	</body>
</html>