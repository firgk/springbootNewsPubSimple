<html>
<meta charset="UTF-8">

<head>
	<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
</head>
<script>
	function submitForm() {
		// 获取表单数据
		var formData = $("#myForm").serialize();
		// 发起Ajax请求
		$.ajax({
			type: "GET",
			url: "http://localhost:8081/user/verify", // 替换为实际的服务器端处理脚本地址
			data: formData,
			success: function (response) {
				var kind = $("#kind").val();
				var username = $("input[name='username']").val();
				var password = $("input[name='password']").val();
				var userObject = {
					username: username,
					password: password,
					kind: kind
				};
				// 请求成功的回调函数
				if (response === "right" && kind === '0') {
					// 将用户信息以JSON格式存储到sessionStorage
					sessionStorage.setItem('user', JSON.stringify(userObject));
					window.location.href = "/web/news.html";
				}
				if (response === "right" && kind === '1') { //bug
					window.location.href = "/web/user_handle.html";
				}
				if (response === "right" && kind === '2') {
					window.location.href = "/web/newCategory.html";
				}
				if (response === "errorpassword")
					alert("密码错误");
				if (response === "nothisuser") {
					alert("没有这个用户");
				}
			},
			error: function (error) {
				alert("异常")
			}
		});
	}
</script>



<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="bulma/bulma.css">



<body>
	<div class="container">
		<div class="notification is-primary">
			请在此登录您的账户:
		</div>
	</div>

	<div class="column is-half is-offset-3">
		<form id="myForm" class="box">
			<label for="username" class="label">账号：</label>
			<input type="text" name="username" class="input">
			<br>
			<br>
			<label for="password" class="label">密码：</label>
			<input type="password" name="password" class="input">
			<br>
			<br>
			<label for="kind" class="label">身份：</label>
			<select id="kind" name="kind" class="select">
				<option value="0">用户</option>
				<option value="1">管理员-用户管理</option>
				<option value="2">管理员-新闻数据</option>
			</select>
			<br>
			<br>
			<input type="button" value="提交" onclick="submitForm()" class="button  is-primary " />
			<br>
			<br>
			<a href="/web/register.html">还没有账户,点击注册</a>
		</form>
	</div>


</body>

</html>